<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>æ—¥ç”¨å“å•†åŸ</title>
  <style>
    :root{--bg:#f7f8fb;--card:#ffffff;--text:#111827;--muted:#6b7280;--primary:#2563eb;--primary-ink:#ffffff;--accent:#10b981;--danger:#ef4444;--border:#e5e7eb;--shadow:0 10px 30px rgba(17,24,39,.08)}
    [data-theme="dark"]{--bg:#0b1220;--card:#0f172a;--text:#e5e7eb;--muted:#94a3b8;--primary:#3b82f6;--primary-ink:#0b1220;--accent:#34d399;--danger:#f87171;--border:#1f2937;--shadow:0 10px 30px rgba(2,6,23,.5)}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Microsoft YaHei",sans-serif}
    .wrap{max-width:1200px;margin:40px auto;padding:0 24px}
    .header{display:flex;align-items:center;gap:12px;margin-bottom:16px}
    .title{flex:1;font-size:32px;font-weight:800}
    .search{flex:1;padding:12px 14px;border:1px solid var(--border);border-radius:12px;background:transparent;color:var(--text)}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:12px;background:var(--card);color:var(--text);cursor:pointer;transition:.2s}
    .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
    .btn.primary{background:var(--primary);color:var(--primary-ink);border-color:transparent}
    .grid{display:grid;grid-template-columns:280px 1fr 340px;gap:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow)}
    .panel{padding:18px}
    .section{margin-bottom:14px}
    .label{font-size:13px;color:var(--muted);margin-bottom:6px}
    .select,.input,.range{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:transparent;color:var(--text)}
    .row{display:flex;gap:10px}
    .list{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;padding:16px}
    .product{display:flex;flex-direction:column;gap:10px;padding:14px;border:1px solid var(--border);border-radius:16px;background:var(--card)}
    .img{height:140px;border-radius:12px;background:linear-gradient(135deg,#93c5fd,#a7f3d0);display:grid;place-items:center;color:#0b1220;font-size:42px}
    .name{font-weight:600}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:12px;padding:3px 8px;border:1px solid var(--border);border-radius:999px;color:var(--muted)}
    .price{font-size:18px;font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .pactions{display:flex;gap:8px}
    .iconbtn{width:36px;height:36px;border:1px solid var(--border);background:transparent;border-radius:12px;display:grid;place-items:center;cursor:pointer}
    .cart{position:sticky;top:24px}
    .cart-header{display:flex;justify-content:space-between;align-items:center}
    .cart-items{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .cart-item{display:grid;grid-template-columns:1fr auto auto auto;gap:10px;align-items:center;padding:10px;border:1px solid var(--border);border-radius:12px}
    .qty{display:flex;align-items:center;gap:6px}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:13px}
    .summary{display:grid;grid-template-columns:1fr auto;gap:8px;margin-top:12px}
    .drawer-toggle{display:none}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;background:var(--primary);color:var(--primary-ink);padding:10px 14px;border-radius:12px;box-shadow:var(--shadow)}
    @media (max-width:980px){.grid{grid-template-columns:1fr}.cart{position:fixed;right:0;top:0;height:100vh;width:84vw;max-width:420px;transform:translateX(100%);transition:.3s}.cart.open{transform:translateX(0)}.drawer-toggle{display:inline-block}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="title">æ—¥ç”¨å“å•†åŸ</div>
      <input id="search" class="search" placeholder="æœç´¢å•†å“ (Ctrl+F)" />
      <button id="theme" class="btn">æµ…/æ·±è‰²</button>
      <button id="drawer" class="btn drawer-toggle">è´­ç‰©è½¦</button>
    </div>
    <div class="grid">
      <div class="card">
        <div class="panel">
          <div class="section">
            <div class="label">åˆ†ç±»</div>
            <select id="category" class="select"></select>
          </div>
          <div class="section">
            <div class="label">å“ç‰Œ</div>
            <select id="brand" class="select"></select>
          </div>
          <div class="section row">
            <div style="flex:1">
              <div class="label">æœ€ä½ä»·</div>
              <input id="min" type="number" class="input" placeholder="0" />
            </div>
            <div style="flex:1">
              <div class="label">æœ€é«˜ä»·</div>
              <input id="max" type="number" class="input" placeholder="500" />
            </div>
          </div>
          <div class="section row">
            <div style="flex:1">
              <div class="label">æ’åº</div>
              <select id="sortBy" class="select">
                <option value="pop">äººæ°”</option>
                <option value="price">ä»·æ ¼</option>
                <option value="rating">è¯„åˆ†</option>
                <option value="name">åç§°</option>
              </select>
            </div>
            <div style="flex:.8">
              <div class="label">æ–¹å‘</div>
              <select id="sortDir" class="select">
                <option value="desc">é™åº</option>
                <option value="asc">å‡åº</option>
              </select>
            </div>
          </div>
          <div class="section">
            <label class="chip"><input id="stock" type="checkbox"/> ä»…æ˜¾ç¤ºæœ‰è´§</label>
          </div>
          <div class="section row">
            <button id="reset" class="btn">é‡ç½®ç­›é€‰</button>
          </div>
        </div>
      </div>
      <div class="card">
        <div id="list" class="list"></div>
      </div>
      <div class="card cart" id="cart">
        <div class="panel">
          <div class="cart-header">
            <div style="font-weight:700">è´­ç‰©è½¦</div>
            <div>
              <button id="clearCart" class="btn">æ¸…ç©º</button>
            </div>
          </div>
          <div id="cartItems" class="cart-items"></div>
          <div class="section">
            <div class="label">ä¼˜æƒ ç </div>
            <div class="row">
              <input id="coupon" class="input" placeholder="è¾“å…¥ä¼˜æƒ ç ï¼Œå¦‚ SAVE10"/>
              <button id="applyCoupon" class="btn">åº”ç”¨</button>
            </div>
            <div class="muted" id="couponTip"></div>
          </div>
          <div class="summary">
            <div>å•†å“é‡‘é¢</div><div id="subtotal">Â¥0.00</div>
            <div>ä¼˜æƒ é‡‘é¢</div><div id="discount">-Â¥0.00</div>
            <div>è¿è´¹</div><div id="shipping">Â¥0.00</div>
            <div style="font-weight:700">åº”ä»˜æ€»è®¡</div><div id="total" style="font-weight:700">Â¥0.00</div>
          </div>
          <div class="section">
            <button id="checkout" class="btn primary" style="width:100%">å»ç»“ç®—</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="toast" class="toast" style="display:none"></div>
  <script>
    const el={search:document.getElementById('search'),theme:document.getElementById('theme'),drawer:document.getElementById('drawer'),category:document.getElementById('category'),brand:document.getElementById('brand'),min:document.getElementById('min'),max:document.getElementById('max'),sortBy:document.getElementById('sortBy'),sortDir:document.getElementById('sortDir'),stock:document.getElementById('stock'),reset:document.getElementById('reset'),list:document.getElementById('list'),cart:document.getElementById('cart'),cartItems:document.getElementById('cartItems'),clearCart:document.getElementById('clearCart'),coupon:document.getElementById('coupon'),applyCoupon:document.getElementById('applyCoupon'),couponTip:document.getElementById('couponTip'),subtotal:document.getElementById('subtotal'),discount:document.getElementById('discount'),shipping:document.getElementById('shipping'),total:document.getElementById('total'),checkout:document.getElementById('checkout'),toast:document.getElementById('toast')}
    const key='shop.daily.web'
    const data=[
      {id:'p01',name:'æŠ½çº¸å·¾ 3å±‚*10åŒ…',price:19.9,brand:'æŸ”æ´',category:'çº¸å“',rating:4.6,stock:48,tags:['çº¸å·¾','å®¶ç”¨'],pop:860},
      {id:'p02',name:'åƒåœ¾è¢‹ åŠ åš 100åª',price:15.8,brand:'æ´å®¶',category:'æ¸…æ´',rating:4.4,stock:120,tags:['åƒåœ¾è¢‹','å¨æˆ¿'],pop:740},
      {id:'p03',name:'æ´—è¡£æ¶² 2kg',price:39,brand:'å‡€å½©',category:'æ¸…æ´',rating:4.7,stock:26,tags:['æ´—è¡£','è¡£ç‰©'],pop:920},
      {id:'p04',name:'æ´—æ‰‹æ¶² 500ml',price:12.9,brand:'æ¸…æ³‰',category:'ä¸ªæŠ¤',rating:4.5,stock:0,tags:['æ´—æ‰‹','æ€èŒ'],pop:560},
      {id:'p05',name:'ç‰™åˆ· è½¯æ¯› 4æ”¯è£…',price:16.9,brand:'ç™½ç¬‘',category:'ä¸ªæŠ¤',rating:4.3,stock:85,tags:['åˆ·ç‰™','å£è…”'],pop:580},
      {id:'p06',name:'ç‰™è† æ—©æ™šå¥—è£…',price:24.5,brand:'ç™½ç¬‘',category:'ä¸ªæŠ¤',rating:4.6,stock:50,tags:['ç‰™è†','å£è…”'],pop:640},
      {id:'p07',name:'ä¿é²œè¢‹ 3å·',price:9.9,brand:'å¨ä¹',category:'å¨æˆ¿',rating:4.2,stock:140,tags:['ä¿é²œ','å¨æˆ¿'],pop:430},
      {id:'p08',name:'ä¿é²œè†œ 30cm*50m',price:13.9,brand:'å¨ä¹',category:'å¨æˆ¿',rating:4.4,stock:60,tags:['ä¿é²œè†œ','å¨æˆ¿'],pop:520},
      {id:'p09',name:'é™¤æ²¹æ´—æ´ç²¾ 1kg',price:18.9,brand:'æ´å®¶',category:'å¨æˆ¿',rating:4.5,stock:90,tags:['æ¸…æ´','é¤å…·'],pop:700},
      {id:'p10',name:'æ‹–åœ°æ¹¿å·¾ 20ç‰‡',price:17.9,brand:'æŸ”æ´',category:'æ¸…æ´',rating:4.1,stock:35,tags:['åœ°æ¿','æ¸…æ´'],pop:410},
      {id:'p11',name:'ä¸€æ¬¡æ€§å£ç½© 50åª',price:29.9,brand:'å®‰æŠ¤',category:'ä¸ªæŠ¤',rating:4.8,stock:200,tags:['å£ç½©','é˜²æŠ¤'],pop:1100},
      {id:'p12',name:'é©¬æ¡¶æ¸…æ´å‰‚ 500ml',price:21.9,brand:'æ´å®¶',category:'æ¸…æ´',rating:4.6,stock:32,tags:['æ¸…æ´','å«æµ´'],pop:620}
    ]
    const state=load()||{filter:{search:'',category:'',brand:'',min:'',max:'',sortBy:'pop',sortDir:'desc',stock:false},cart:{items:[],coupon:''},wish:[],theme:'light'}
    document.documentElement.setAttribute('data-theme',state.theme)
    el.search.value=state.filter.search
    el.sortBy.value=state.filter.sortBy
    el.sortDir.value=state.filter.sortDir
    el.stock.checked=state.filter.stock
    el.coupon.value=state.cart.coupon
    renderFilters()
    renderList()
    renderCart()

    function save(){localStorage.setItem(key,JSON.stringify(state))}
    function load(){try{return JSON.parse(localStorage.getItem(key))}catch(e){return null}}
    function num(n){return Number(n)||0}
    function currency(n){return 'Â¥'+n.toFixed(2)}
    function toast(msg){el.toast.textContent=msg;el.toast.style.display='block';setTimeout(()=>{el.toast.style.display='none'},1600)}
    function uniq(arr){return Array.from(new Set(arr))}
    function ratingStars(r){const n=Math.round(r);return 'â˜…'.repeat(Math.min(5,n))+'â˜†'.repeat(Math.max(0,5-n))}
    function renderFilters(){const cats=uniq(data.map(x=>x.category)).sort();const brands=uniq(data.map(x=>x.brand)).sort();el.category.innerHTML='<option value="">å…¨éƒ¨åˆ†ç±»</option>'+cats.map(x=>'<option value="'+x+'">'+x+'</option>').join('');el.brand.innerHTML='<option value="">å…¨éƒ¨å“ç‰Œ</option>'+brands.map(x=>'<option value="'+x+'">'+x+'</option>').join('');el.category.value=state.filter.category;el.brand.value=state.filter.brand;el.min.value=state.filter.min;el.max.value=state.filter.max}
    function applyFilter(){let arr=[...data];const f=state.filter;const s=f.search.toLowerCase();if(s)arr=arr.filter(p=>p.name.toLowerCase().includes(s)||p.tags.some(t=>t.includes(s)));if(f.category)arr=arr.filter(p=>p.category===f.category);if(f.brand)arr=arr.filter(p=>p.brand===f.brand);if(f.stock)arr=arr.filter(p=>p.stock>0);if(f.min!=='')arr=arr.filter(p=>p.price>=num(f.min));if(f.max!=='')arr=arr.filter(p=>p.price<=num(f.max));const d=f.sortDir==='asc'?1:-1;const k=f.sortBy;arr.sort((a,b)=>{let va=a[k],vb=b[k];if(k==='name'){va=va.toLowerCase();vb=vb.toLowerCase()}return va>vb?d:va<vb?-d:0});return arr}
    function renderList(){el.list.innerHTML='';applyFilter().forEach(p=>{const card=document.createElement('div');card.className='product';card.draggable=true;card.dataset.id=p.id;const img=document.createElement('div');img.className='img';img.textContent=p.category==='å¨æˆ¿'?'ğŸ³':p.category==='æ¸…æ´'?'ğŸ«§':p.category==='ä¸ªæŠ¤'?'ğŸ§´':'ğŸ“¦';const name=document.createElement('div');name.className='name';name.textContent=p.name;const meta=document.createElement('div');meta.className='muted';meta.textContent=p.brand+' Â· '+ratingStars(p.rating)+' Â· åº“å­˜ '+p.stock;const tags=document.createElement('div');tags.className='tags';p.tags.forEach(t=>{const s=document.createElement('span');s.className='tag';s.textContent='#'+t;tags.appendChild(s)});const price=document.createElement('div');price.className='price';price.textContent=currency(p.price);const actions=document.createElement('div');actions.className='pactions';const add=document.createElement('button');add.className='btn primary';add.textContent='åŠ å…¥è´­ç‰©è½¦';add.onclick=()=>{addToCart(p.id)};const wish=document.createElement('button');wish.className='iconbtn';wish.innerHTML=state.wish.includes(p.id)?'â¤ï¸':'ğŸ¤';wish.onclick=()=>{toggleWish(p.id);wish.innerHTML=state.wish.includes(p.id)?'â¤ï¸':'ğŸ¤'};const stockTip=document.createElement('div');stockTip.className='chip';stockTip.textContent=p.stock>0?'æœ‰è´§':'ç¼ºè´§';actions.appendChild(add);actions.appendChild(wish);actions.appendChild(stockTip);card.appendChild(img);card.appendChild(name);card.appendChild(meta);card.appendChild(tags);card.appendChild(price);card.appendChild(actions);card.addEventListener('dragstart',e=>{e.dataTransfer.setData('text/plain',p.id)});el.list.appendChild(card)});el.cart.addEventListener('dragover',e=>{e.preventDefault()});el.cart.addEventListener('drop',e=>{e.preventDefault();const id=e.dataTransfer.getData('text/plain');if(id)addToCart(id)})}
    function addToCart(id){const p=data.find(x=>x.id===id);if(!p)return;if(p.stock<=0){toast('è¯¥å•†å“ç¼ºè´§');return}const it=state.cart.items.find(x=>x.id===id);if(it){it.qty=Math.min(it.qty+1,99)}else{state.cart.items.push({id,qty:1})}save();renderCart();toast('å·²åŠ å…¥è´­ç‰©è½¦')}
    function removeFromCart(id){state.cart.items=state.cart.items.filter(x=>x.id!==id);save();renderCart()}
    function setQty(id,qty){const it=state.cart.items.find(x=>x.id===id);if(!it)return;it.qty=Math.max(1,Math.min(99,qty));save();renderCart()}
    function clearCart(){state.cart.items=[];save();renderCart()}
    function toggleWish(id){if(state.wish.includes(id)){state.wish=state.wish.filter(x=>x!==id)}else{state.wish.push(id)}save()}
    function calc(){let sub=0;state.cart.items.forEach(it=>{const p=data.find(x=>x.id===it.id);if(p)sub+=p.price*it.qty});let dis=0;let ship=0;const code=(state.cart.coupon||'').trim().toUpperCase();let tip='';if(code==='SAVE10'){dis=sub*0.1;tip='å·²ä½¿ç”¨ SAVE10: 9æŠ˜'}else if(code==='LESS20'&&sub>=150){dis=20;tip='å·²ä½¿ç”¨ LESS20: æ»¡150å‡20'}else if(code==='FREESHIP'){tip='å·²ä½¿ç”¨ FREESHIP: å…è¿è´¹'}if(sub-dis>=199||code==='FREESHIP'){ship=0}else{ship=sub===0?0:12}return {sub,dis,ship,total:Math.max(0,sub-dis+ship),tip}}
    function renderCart(){el.cartItems.innerHTML='';state.cart.items.forEach(it=>{const p=data.find(x=>x.id===it.id);const row=document.createElement('div');row.className='cart-item';const nm=document.createElement('div');nm.textContent=p.name;const pr=document.createElement('div');pr.textContent=currency(p.price);const qty=document.createElement('div');qty.className='qty';const minus=document.createElement('button');minus.className='iconbtn';minus.textContent='âˆ’';minus.onclick=()=>{setQty(it.id,it.qty-1)};const q=document.createElement('input');q.type='number';q.min='1';q.max='99';q.value=it.qty;q.className='input';q.style.width='70px';q.onchange=()=>{setQty(it.id,Number(q.value))};const plus=document.createElement('button');plus.className='iconbtn';plus.textContent='+';plus.onclick=()=>{setQty(it.id,it.qty+1)};qty.appendChild(minus);qty.appendChild(q);qty.appendChild(plus);const rm=document.createElement('button');rm.className='iconbtn';rm.textContent='ğŸ—‘';rm.onclick=()=>{removeFromCart(it.id)};row.appendChild(nm);row.appendChild(pr);row.appendChild(qty);row.appendChild(rm);el.cartItems.appendChild(row)});const c=calc();el.subtotal.textContent=currency(c.sub);el.discount.textContent='-'+currency(c.dis);el.shipping.textContent=currency(c.ship);el.total.textContent=currency(c.total);el.couponTip.textContent=c.tip}
    function applyCoupon(){state.cart.coupon=el.coupon.value;save();renderCart();toast('ä¼˜æƒ ç å·²åº”ç”¨')}
    function checkout(){const c=calc();if(c.total<=0){toast('è´­ç‰©è½¦ä¸ºç©º');return}const panel=document.createElement('div');panel.style.position='fixed';panel.style.inset='0';panel.style.background='rgba(0,0,0,.35)';panel.style.display='grid';panel.style.placeItems='center';const box=document.createElement('div');box.className='card';box.style.width='560px';box.style.padding='18px';const ttl=document.createElement('div');ttl.style.fontWeight='700';ttl.style.marginBottom='8px';ttl.textContent='è®¢å•ç¡®è®¤';const list=document.createElement('div');state.cart.items.forEach(it=>{const p=data.find(x=>x.id===it.id);const line=document.createElement('div');line.style.display='grid';line.style.gridTemplateColumns='1fr auto auto';line.style.gap='8px';line.style.margin='6px 0';const nm=document.createElement('div');nm.textContent=p.name;const qs=document.createElement('div');qs.textContent='x'+it.qty;const pr=document.createElement('div');pr.textContent=currency(p.price*it.qty);line.appendChild(nm);line.appendChild(qs);line.appendChild(pr);list.appendChild(line)});const sum=document.createElement('div');sum.style.marginTop='10px';sum.innerHTML='<div class="summary"><div>æ€»è®¡</div><div>'+el.total.textContent+'</div></div>';const row=document.createElement('div');row.style.display='flex';row.style.gap='10px';row.style.marginTop='12px';const ok=document.createElement('button');ok.className='btn primary';ok.textContent='ä¸‹å•';const cancel=document.createElement('button');cancel.className='btn';cancel.textContent='å–æ¶ˆ';row.appendChild(ok);row.appendChild(cancel);box.appendChild(ttl);box.appendChild(list);box.appendChild(sum);box.appendChild(row);panel.appendChild(box);document.body.appendChild(panel);cancel.onclick=()=>{panel.remove()};ok.onclick=()=>{panel.remove();clearCart();toast('ä¸‹å•æˆåŠŸ')}}

    el.theme.onclick=()=>{state.theme=state.theme==='light'?'dark':'light';document.documentElement.setAttribute('data-theme',state.theme);save()}
    el.drawer.onclick=()=>{el.cart.classList.toggle('open')}
    el.search.oninput=()=>{state.filter.search=el.search.value;save();renderList()}
    el.category.onchange=()=>{state.filter.category=el.category.value;save();renderList()}
    el.brand.onchange=()=>{state.filter.brand=el.brand.value;save();renderList()}
    el.min.onchange=()=>{state.filter.min=el.min.value;save();renderList()}
    el.max.onchange=()=>{state.filter.max=el.max.value;save();renderList()}
    el.sortBy.onchange=()=>{state.filter.sortBy=el.sortBy.value;save();renderList()}
    el.sortDir.onchange=()=>{state.filter.sortDir=el.sortDir.value;save();renderList()}
    el.stock.onchange=()=>{state.filter.stock=el.stock.checked;save();renderList()}
    el.reset.onclick=()=>{state.filter={search:'',category:'',brand:'',min:'',max:'',sortBy:'pop',sortDir:'desc',stock:false};el.search.value='';renderFilters();save();renderList()}
    el.clearCart.onclick=()=>{clearCart();toast('å·²æ¸…ç©ºè´­ç‰©è½¦')}
    el.applyCoupon.onclick=()=>{applyCoupon()}
    el.checkout.onclick=()=>{checkout()}
    window.addEventListener('keydown',e=>{if(e.ctrlKey&&e.key.toLowerCase()==='f'){e.preventDefault();el.search.focus()}if(e.key==='Escape'){el.cart.classList.remove('open')}})
  </script>
</body>
</html>
